!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VueTms=t()}(this,function(){"use strict";var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();return function(){function n(){if(e(this,n),this.onList=[],!n._Vue||!n._Tms)throw new Error("Please install with Vue.use(VueTms, Tms).");this.app=null}return t(n,[{key:"observe",value:function(){var e=this;if(Object.defineProperty(this,"app",{enumerable:!1}),Object.defineProperty(this,"onList",{enumerable:!1}),n._Vue){this.app=new n._Vue({data:this});!function t(o,r){Object.keys(o).forEach(function(i){var a=o[i];if(n._Tms&&a instanceof n._Tms&&"production"!==process.env.NODE_ENV){var s=function(e){var t;console.log("type       "+r.concat([i]).join("/")+"."+e.type+"(payload: "+(t=e.payload,Object.prototype.toString.call(t).replace(/^(.*?) |]$/g,"").toLowerCase())+");","\n\rpayload   ",e.payload,"\n\rpayloads   ",e.payloads,"\n\rtarget    ",e.target,"\n\r---")};a.dep.addSub(s),e.onList.push({target:a,onChage:s}),t(a,[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r),[i]))}})}(this,[])}}},{key:"destroy",value:function(){this.app&&(this.app.$destroy(),this.onList.forEach(function(e){e.target.dep.removeSub(e.onChage)}),this.onList.splice(0,this.onList.length))}}],[{key:"install",value:function(e,t){n._Vue=e,n._Tms=t,Object.defineProperty(n._Vue.prototype,"$store",{get:function(){return this.$root._store}}),Object.defineProperty(n._Vue.prototype,"_store",{get:function(){return this.$options.store}})}}]),n}()});
